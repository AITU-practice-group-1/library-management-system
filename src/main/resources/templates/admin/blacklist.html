<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>–ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/user/blacklist.css">
</head>
<body>
<div th:replace="fragments/navbar :: navbar"></div>

<div class="container">
  <h2>üìõ –ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>

  <form method="get" th:action="@{/blacklist}">
    <input type="text" style="color: #5d4037" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ email" th:value="${search}">
    <button type="submit">–ü–æ–∏—Å–∫</button>
  </form>

  <!-- üîí –ó–∞–±–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
  <h3>üö´ –ó–∞–±–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
  <table>
    <thead>
    <tr>
      <th>–ò–º—è</th>
      <th>Email</th>
      <th>–î–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏</th>
      <th>–ü—Ä–∏—á–∏–Ω–∞</th>
      <th>–î–∞—Ç–∞</th>
      <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="entry : ${bannedEntries}" class="banned">
      <td th:text="${entry.user.firstName + ' ' + entry.user.lastName}"></td>
      <td th:text="${entry.user.email}"></td>
      <td th:text="${entry.daysOverdue}">0</td>
      <td th:text="${entry.reason}">-</td>
      <td th:text="${#temporals.format(entry.addedAt, 'dd.MM.yyyy')}">-</td>
      <td class="actions">
        <form th:action="@{'/unban/' + ${entry.user.id}}" method="post" style="display:inline;">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <button type="submit">–†–∞–∑–±–∞–Ω–∏—Ç—å</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <!-- ‚ö† –ê–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –±–µ–∑ –±–∞–Ω–∞ -->
  <h3>‚ö† –ê–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è</h3>
  <table>
    <thead>
    <tr>
      <th>–ò–º—è</th>
      <th>Email</th>
      <th>–î–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏</th>
      <th>–ü—Ä–∏—á–∏–Ω–∞</th>
      <th>–î–∞—Ç–∞</th>
      <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="entry : ${activeViolations}" class="unresolved">
      <td th:text="${entry.user.firstName + ' ' + entry.user.lastName}"></td>
      <td th:text="${entry.user.email}"></td>
      <td th:text="${entry.daysOverdue}">0</td>
      <td th:text="${entry.reason}">-</td>
      <td th:text="${#temporals.format(entry.addedAt, 'dd.MM.yyyy')}">-</td>
      <td class="actions">
        <form th:action="@{'/forgive/' + ${entry.user.id}}" method="post" style="display:inline;">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <button type="submit">–ü—Ä–æ—Å—Ç–∏—Ç—å</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <!-- üìÑ –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—à—ë–Ω–Ω—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π -->
  <h3>üìÑ –ò—Å—Ç–æ—Ä–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π</h3>
  <table>
    <thead>
    <tr>
      <th>–ò–º—è</th>
      <th>Email</th>
      <th>–î–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏</th>
      <th>–ü—Ä–∏—á–∏–Ω–∞</th>
      <th>–î–∞—Ç–∞</th>
      <th>–†–µ—à–µ–Ω–æ</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="entry : ${resolvedViolations}" class="resolved">
      <td th:text="${entry.user.firstName + ' ' + entry.user.lastName}"></td>
      <td th:text="${entry.user.email}"></td>
      <td th:text="${entry.daysOverdue}">0</td>
      <td th:text="${entry.reason}">-</td>
      <td th:text="${#temporals.format(entry.addedAt, 'dd.MM.yyyy')}">-</td>
      <td th:utext="${entry.resolved ? '&#10003;' : '&#10007;'}"></td>
    </tr>
    </tbody>
  </table>
</div>
</body>
</html>

