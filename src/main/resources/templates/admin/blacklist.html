<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>–ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/user/blacklist.css">
</head>
<body>
<div th:replace="fragments/navbar :: navbar"></div>

<div class="container">
  <h2>üìõ –ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>

  <form method="get" th:action="@{/blacklist}">
    <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ email" th:value="${search}">
    <button type="submit">–ü–æ–∏—Å–∫</button>
  </form>

  <h3>–ó–∞–±–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
  <table>
    <thead>
    <tr>
      <th>–ò–º—è</th>
      <th>Email</th>
      <th>–î–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏</th>
      <th>–ü—Ä–∏—á–∏–Ω–∞</th>
      <th>–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</th>
      <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="entry : ${bannedEntries}">
      <td th:text="${entry.user.firstName + ' ' + entry.user.lastName}"></td>
      <td th:text="${entry.user.email}"></td>
      <td th:text="${entry.daysOverdue}">0</td>
      <td th:text="${entry.reason}">-</td>
      <td th:text="${#temporals.format(entry.addedAt, 'dd.MM.yyyy')}">-</td>
      <td>
        <form th:action="@{'/unban/' + ${entry.user.id}}" method="post">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <button type="submit">–†–∞–∑–±–∞–Ω–∏—Ç—å</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <h3 style="margin-top: 40px;">üìÑ –ò—Å—Ç–æ—Ä–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π</h3>
  <table>
    <thead>
    <tr>
      <th>–ò–º—è</th>
      <th>Email</th>
      <th>–î–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏</th>
      <th>–ü—Ä–∏—á–∏–Ω–∞</th>
      <th>–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</th>
      <th>–†–µ—à–µ–Ω–æ</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="entry : ${historyEntries}">
      <td th:text="${entry.user.firstName + ' ' + entry.user.lastName}"></td>
      <td th:text="${entry.user.email}"></td>
      <td th:text="${entry.daysOverdue}">0</td>
      <td th:text="${entry.reason}">-</td>
      <td th:text="${#temporals.format(entry.addedAt, 'dd.MM.yyyy')}">-</td>
      <td th:text="${entry.resolved ? '‚úî' : '‚úñ'}"></td>
    </tr>
    </tbody>
  </table>
</div>
</body>
</html>
