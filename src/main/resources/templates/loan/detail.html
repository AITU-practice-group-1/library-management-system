<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Loan Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" th:href="@{/css/styles.css}">
  <style>
    body { background-color: #f8f9fa; }
    .detail-card .list-group-item { background-color: transparent; }
    .detail-key { font-weight: 600; }
  </style>
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-9">
      <div class="card shadow-sm detail-card">
        <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
          <h1 class="h4 mb-0"><i class="bi bi-file-earmark-text"></i> Loan Details</h1>
          <span th:if="<span class="math-inline">\{loan\.status \=\= 'RETURNED'\}" class\="badge bg\-success fs\-6"\>Returned</span\>
          <span th\:if\="</span>{loan.status != 'RETURNED' and loan.isOverdue}" class="badge bg-danger fs-6">Overdue</span>
          <span th:if="<span class="math-inline">\{loan\.status \!\= 'RETURNED' and \!loan\.isOverdue\}" class\="badge bg\-primary fs\-6"\>On Loan</span\>
        </div\>
        <div class\="card\-body"\>
          <ul class\="list\-group list\-group\-flush"\>
            <li class\="list\-group\-item d\-flex justify\-content\-between"\>
<span class\="detail\-key"\>Loan ID\:</span\>
              <span th\:text\="</span>{loan.id}"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span class="detail-key">Book Title:</span>
              <span th:text="<span class="math-inline">\{loan\.bookTitle\}"\></span\>
            </li\>
            <li class\="list\-group\-item d\-flex justify\-content\-between"\>
<span class\="detail\-key"\>Book ISBN\:</span\>
              <span th\:text\="</span>{loan.bookIsbn}"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span class="detail-key">Borrower:</span>
              <span th:text="<span class="math-inline">\{loan\.userEmail\}"\></span\>
            </li\>
            <li class\="list\-group\-item d\-flex justify\-content\-between"\>
<span class\="detail\-key"\>Issued By\:</span\>
              <span th\:text\="</span>{loan.issuedByEmail}"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between">
              <span class="detail-key">Issue Date:</span>
              <span th:text="<span class="math-inline">\{\#temporals\.format\(loan\.issueDate, 'MMMM dd, yyyy, HH\:mm'\)\}"\></span\>
            </li\>
            <li class\="list\-group\-item d\-flex justify\-content\-between"\>
<span class\="detail\-key"\>Due Date\:</span\>
              <span th\:text\="</span>{#temporals.format(loan.dueDate, 'MMMM dd, yyyy, HH:mm')}"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between" th:if="<span class="math-inline">\{loan\.returnDate \!\= null\}"\>
            <span class\="detail\-key"\>Return Date\:</span\>
            <span th\:text\="</span>{#temporals.format(loan.returnDate, 'MMMM dd, yyyy, HH:mm')}"></span>
            </li>
          </ul>
        </div>
        <div class="card-footer text-center">
          <a th:href="@{/loans}" class="btn btn-secondary"><i class="